# Индивидуальный отчет по проекту PyTaskHub

**Студент:** Юсупов Артур  
**GitHub:** @AsyncAssassin  
**Дисциплина:** Проектный практикум-1  
**Проект:** PyTaskHub - Backend для системы управления задачами  
**Период:** Октябрь - Декабрь 2025

---

## 1. Моя роль в проекте

**Роль:** Team Lead / Backend Developer

**Основные обязанности:**

- Организация и планирование работы команды из 5 человек
- Архитектурные решения и техническое руководство
- Code review всех pull requests и задач проекта
- Разработка критических компонентов системы (аутентификация, инфраструктура, база данных)
- Менторинг разработчиков команды
- Настройка инфраструктуры (Docker, Docker Compose)
- Контроль качества кода и покрытия тестами

---

## 2. Перечень выполненных задач

### 2.1 Инфраструктурные задачи

#### #1 Setup: Project Structure

**Описание:** Создание базовой структуры проекта

**Работа:**

- Разработал архитектуру проекта согласно best practices FastAPI
- Создал структуру папок: app/, tests/, docs/, alembic/
- Настроил виртуальное окружение и requirements.txt
- Подготовил .gitignore и базовую документацию

**Результат:** Создан фундамент проекта, на котором строилась вся дальнейшая разработка.

#### #2 Setup: Database Configuration

**Описание:** Настройка PostgreSQL и системы миграций Alembic

**Работа:**

- Настроил подключение к PostgreSQL через SQLAlchemy
- Инициализировал и настроил Alembic для миграций
- Создал систему конфигурации с поддержкой окружений (dev/test/prod)
- Настроил переменные окружения через .env

**Результат:** Полностью рабочая система управления базой данных с миграциями.

#### #18 Setup: Docker Compose

**Описание:** Контейнеризация приложения

**Работа:**

- Создал Dockerfile для FastAPI приложения с multi-stage build
- Настроил docker-compose.yml с сервисами app и postgres
- Настроил volumes, networks и environment variables
- Добавил health checks для сервисов
- Обновил документацию с Docker-инструкциями

**Результат:** Команда получила единую среду разработки, устранены проблемы с различиями локальных окружений.

---

### 2.2 Модели и миграции

#### #5 Feature: User Model

**Описание:** Создание модели пользователя

**Работа:**

- Разработал SQLAlchemy модель User с полями: id, username, email, password_hash, first_name, last_name, timestamps
- Реализовал методы set_password() и verify_password() с использованием bcrypt
- Создал Alembic миграцию для таблицы users
- Добавил индексы и unique constraints

**Результат:** Создана основа системы аутентификации с полным покрытием тестами.

#### #15 Integration: Models & Migrations

**Описание:** Интеграция всех моделей и создание единой системы миграций

**Работа:**

- Интегрировал модели User, Task, Category в единую систему
- Настроил связи между моделями (Foreign Keys, relationships)
- Создал и протестировал миграции для всех таблиц
- Проверил корректность работы каскадного удаления

**Результат:** Все модели корректно связаны, миграции работают без ошибок.

---

### 2.3 Аутентификация и авторизация

#### #8 Feature: User Registration

**Описание:** Эндпоинт регистрации пользователей

**Работа:**

- Создал POST /api/v1/auth/register endpoint
- Разработал Pydantic схемы UserCreate и UserResponse
- Реализовал валидацию данных (email format, username length, password strength)
- Проверка уникальности username и email с возвратом 409 Conflict
- Хеширование паролей перед сохранением

**Результат:** Полностью функциональная регистрация с корректной обработкой ошибок.

#### #9 Feature: User Login

**Описание:** Аутентификация с JWT токенами

**Работа:**

- Создал POST /api/v1/auth/login endpoint
- Реализовал генерацию JWT access (30 мин) и refresh (7 дней) токенов
- Настроил payload токенов с user_id, email, username
- Проверка credentials и хешей паролей
- Использовал PyJWT вместо python-jose для упрощения зависимостей

**Результат:** Работающая система аутентификации с JWT токенами.

#### #10 Feature: JWT Middleware

**Описание:** Защита эндпоинтов через middleware

**Работа:**

- Создал dependency get_current_user для FastAPI
- Реализовал извлечение и валидацию токенов из Authorization header
- Обработка expired, invalid, malformed токенов с возвратом 401
- Загрузка пользователя из БД и внедрение в эндпоинты
- Создал type alias CurrentUser для удобства использования

**Результат:** Все защищенные эндпоинты работают через единый механизм аутентификации.

#### #11 Feature: Token Refresh

**Описание:** Обновление access токена

**Работа:**

- Создал POST /api/v1/auth/refresh endpoint
- Валидация refresh токена и проверка типа токена
- Генерация нового access токена без повторного логина
- Защита от использования access токена для refresh

**Результат:** Пользователь может продлить сессию без повторного ввода логина и пароля.

---

### 2.4 Исправление ошибок

#### #86 Bug: Authorization with test data from script doesn't work

**Описание:** Авторизация с тестовыми данными из скрипта не работает

**Работа:**

- Диагностировал проблему: скрипт создавал тестовых пользователей с некорректным хешем пароля
- Выявил, что хеш пароля в скрипте не соответствовал используемому алгоритму хеширования
- Исправил генерацию хеша пароля в скрипте создания тестовых данных
- Проверил авторизацию для всех тестовых пользователей

**Результат:** Тестовые пользователи корректно авторизуются в системе.

#### #95 Bug: JWT токен не работает после повторного логина при истечении предыдущего

**Описание:** Критический баг - после истечения JWT access токена повторная авторизация возвращает токен, который не проходит валидацию

**Работа:**

- Провёл детальную диагностику нестабильной проблемы
- Выявил причину: использование datetime.utcnow() вместо timezone-aware datetime
- Заменил datetime.utcnow() на datetime.now(timezone.utc) в модуле security.py
- Добавил debug logging для отслеживания проблем с токенами
- Протестировал сценарий с ACCESS_TOKEN_EXPIRE_MINUTES=1 для ускоренной проверки
- Проверил все шаги: логин, использование токена, истечение, повторный логин

**Результат:** JWT токены корректно работают после повторной авторизации.

#### #98 Apply PEP8 formatting to entire codebase

**Описание:** Приведение всего кода проекта к стандартам PEP8

**Работа:**

- Применил black formatter (line-length=88) к 34 файлам проекта
- Использовал isort для реорганизации импортов в 31 файле
- Проверил, что все 199 тестов проходят после форматирования
- Убедился в сохранении code coverage на уровне 95%
- Задокументировал допустимые исключения (длинные docstrings, sys.path imports)

**Результат:** Код проекта приведен к единому стилю по стандартам PEP8.

#### #101 Bug: due_date accepts Unix timestamps instead of ISO format

**Описание:** Исправление валидации поля due_date

**Работа:**

- Диагностировал проблему: Pydantic автоматически преобразовывал числа в Unix timestamps
- Разработал field validator для отклонения numeric values
- Добавил валидатор в TaskBase и TaskUpdate схемы
- Написал тесты для проверки валидации (create/update)
- Протестировал все сценарии: timestamps (422), ISO format (201), null (201)

**Результат:** API принимает только ISO 8601 формат для дат.

---

### 2.5 Code Review

В рамках роли Team Lead провел code review всех задач проекта для обеспечения качества кода и единого стиля разработки.

**Объем работы:**

- Проверены все pull requests проекта
- Для каждой задачи проведена проверка соответствия требованиям, качества кода и покрытия тестами

**Примеры проведенных code reviews:**

- Tasks API Documentation (Алина) - review с комментариями по улучшению структуры и полноты документации
- API User Guide (Алина) - выявлены и указаны недочеты, предложены исправления
- Test Task CRUD (Валерия) - рекомендации по структуре и организации тестов
- Test Coverage Critical Modules (Сергей) - помощь в достижении высокого покрытия тестами
- Full Documentation Review (Алина) - детальная проверка всей документации проекта

**Помощь команде:**

- Помог Валерии разобраться с настройкой Docker environment
- Объяснил Сергею лучшие практики написания unit тестов
- Консультировал команду по архитектурным решениям и выбору технологий
- Проводил разбор сложных технических вопросов

---

## 3. Использованные технологии и инструменты

### Backend Framework и Core

- **FastAPI** - основной web framework
- **Pydantic** - валидация данных и схемы
- **SQLAlchemy 2.0** - ORM для работы с БД (async)
- **Alembic** - система миграций БД
- **PyJWT** - генерация и валидация JWT токенов
- **bcrypt/passlib** - хеширование паролей

### Database

- **PostgreSQL** - основная СУБД
- **asyncpg** - асинхронный драйвер для PostgreSQL

### DevOps и Infrastructure

- **Docker** - контейнеризация приложения
- **Docker Compose** - оркестрация сервисов
- **Uvicorn** - ASGI сервер

### Testing

- **pytest** - testing framework
- **pytest-asyncio** - поддержка async тестов
- **pytest-cov** - code coverage

### Code Quality

- **black** - автоматическое форматирование кода
- **isort** - сортировка импортов
- **flake8** - линтинг и проверка PEP8

### Tools и Utilities

- **Postman** - тестирование API
- **Git/GitHub** - version control и collaboration
- **GitHub Projects** - управление задачами
- **Makefile** - автоматизация команд
- **python-dotenv** - управление переменными окружения

### Documentation

- **Swagger/OpenAPI** - автоматическая документация API
- **Markdown** - написание документации

---

## 4. Саморефлексия

### 4.1 Достижения

**Технические:**

- Спроектировал и реализовал инфраструктуру проекта (структура, Docker, база данных)
- Разработал полную систему аутентификации с JWT (регистрация, логин, middleware, refresh токенов)
- Создал интеграцию моделей и миграций
- Исправил критические баги (JWT авторизация, тестовые данные, валидация дат)
- Применил PEP8 форматирование ко всему проекту (34 файла)

**Лидерские:**

- Организовал работу команды из 5 человек
- Провел code review всех задач проекта с конструктивной обратной связью
- Адаптировал стиль менторинга под уровень каждого члена команды
- Координировал работу так, что MVP был готов в срок

**Процессные:**

- Внедрил structured code review process для всех задач
- Настроил автоматизацию (Makefile, Docker, scripts)
- Участвовал в создании документации проекта

### 4.2 Трудности и их решение

**1. Настройка инфраструктуры Docker**

- Проблема: Локальный uvicorn и Docker container конфликтовали на порту 8000
- Решение: Детально разобрался с network setup, помог команде настроить окружения

**2. JWT token timezone issue**

- Проблема: Обнаружена проблема с timezone в JWT токенах
- Решение: Использование timezone-aware datetime объектов

**3. Координация работы команды**

- Проблема: Члены команды иногда работали над зависимыми задачами параллельно
- Решение: Улучшил процесс планирования, ввел регулярные синхронизации

**4. Разный уровень опыта в команде**

- Проблема: Разработчикам с меньшим опытом требовалось больше помощи
- Решение: Проводил детальные code review с объяснениями, консультировал по техническим вопросам

### 4.3 Впечатления от командной работы

**Позитивные моменты:**

- Команда быстро реагировала на комментарии в PR и в мессенджере
- Члены команды помогали друг другу - Сергей и Валерия с тестами, Алина с документацией
- Наблюдал рост уверенности разработчиков с каждой выполненной задачей
- Команда доставила качественный MVP в установленные сроки

**Вызовы:**

- Не всегда получалось синхронизироваться онлайн из-за разных графиков
- Иногда накапливалось несколько PR одновременно для review
- Приходилось балансировать между качеством и соблюдением сроков

**Ключевые уроки:**

1. Code review - это инвестиция в качество, которая окупается
2. Регулярная коммуникация предотвращает блокеры в работе
3. Хорошая документация экономит время на ответы на вопросы
4. Автоматизация (Docker, Makefile) ускоряет разработку
5. Менторинг команды - важная часть роли тимлида

---

## 5. Итоги

**Количественные показатели:**

- Выполнено задач: 13 (инфраструктура, аутентификация, интеграция, code quality, bugfixes)
- Code review: проведен для всех задач проекта
- Роль: Team Lead и Backend Developer

**Качественные результаты:**

- Создана инфраструктура проекта с Docker и системой миграций
- Реализована полная система аутентификации с JWT
- Команда работала по единым стандартам благодаря code review
- Проект готов к развертыванию и дальнейшей поддержке

**Личный рост:**

- Первый опыт технического лидерства проекта на Python в команде из 5 человек
- Углубил знания FastAPI, SQLAlchemy, Docker, JWT
- Развил навыки code review и менторинга
- Научился балансировать между качеством и дедлайнами
- Получил опыт управления проектом в условиях сжатых сроков

**Благодарность команде:**

Выражаю благодарность Сергею, Валерии, Стелле и Алине за профессионализм, отзывчивость и вклад в проект.
Все были вовлечены в проект, удалось создать дружелюбную и продуктивную атмосферу в команде.
Благодарю Владимира и сотрудников магистратуры за возможность получить опыт командной разработки в Python стеке.

---

**Дата:** 14 декабря 2025

Юсупов Артур